<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>check jQuery</title>
<script type="text/javascript" src="../src/lib/jquery-1.9.1.js"></script>
<script type="text/javascript" src="../../../lib/big.js"></script>
<script type="text/javascript" src="../../core.js"></script>
<script type="text/javascript" src="../../ct.js"></script>
<script type="text/javascript">

	var t = {}

	var init = function(category, ci) {
		t.category = category
		t.ci = ci
	}
	unitConverter.core.registerConversionInfo = init
	
	/* - - - - - */

	function stringBufferFactory() {
	    var str = ""
	    var indentStr = "    "
	    
	    return {
	    	append: function(s) {
	    		s = s || ""
	    		str = str + s
	    	},
	    	
    		appendWithIndent: function(s, indentLevel) {
        		s = s || ""
        		indentLevel = indentLevel || 0
        		var indent = ""
        		for (var i=0; i < indentLevel; i++) {
        			indent = indent + indentStr
        		}
        		sb.append(indent + s)
       		},
        
        	appendLine: function(s) {
        	    s = s || ""
        	    sb.append(s + '\n')
        	},
        
        	appendLineWithIndent: function(s, indentLevel) {
        		s = s || ""
        		sb.appendWithIndent(s + '\n', indentLevel)
        	},
                
        	toString: function() {
            	return str
        	}
    	}
	}

	function print(msg, isNG) {
		if (isNG) {
			alert(msg)
			msg = "  " + msg
		}
		document.getElementById('output').value += msg + '\n'
	}
	
	function printNG(msg) {
		print(msg, true)
	}
	

	function assertTrue(condition, msg) {
		var s = "assertTrue(): "
		if (condition) {
			print(s + "OK")
		} else {
			printNG(s + "NG" + (typeof msg == "string" ? msg : ""))
		}
	}
	
	function assertObject(object, msg) {
		var s = "assertObject(): "
		if (typeof object == "object") {
			print(s + "OK")
		} else {
			printNG(s + "NG" + (typeof msg == "string" ? msg : ""))
		}
	}
	
	function assertEquals(expected, actual, msg) {
		var isEquals = (expected == actual)
		var s = "assertEquals(): "
		s += (isEquals ? "OK" : "NG") + ", expected='" + expected + "', actual='" + actual + "'"
		if (isEquals) {
			print(s)
		} else {
			printNG(s + (typeof msg == "string" ? msg : ""))
		}
	}
	
	function assertExactlyEquals(expected, actual) {
		
	}
		

	var ut = function(category, ci) {
		print("start: Unit Test")
		print("")
		
		assertEquals("Length", category, "category")
		assertEquals("function", ci.type, "ci.type")
		
		// ci.unitList
		print("")
		print("ci.unitList")
		assertTrue(ci.unitList instanceof Array)
		assertEquals("m", ci.unitList[0])
		assertEquals("km", ci.unitList[1])
		
		// ci.conversionTable
		print("")
		print("ci.conversionTable")
		assertTrue(ci.conversionTable)
		
		// m
		assertObject(ci.conversionTable["m"])
		assertEquals("m (SI)", ci.conversionTable["m"].label)
		assertObject(ci.conversionTable["m"].converters)
		assertEquals(1.234, ci.conversionTable["m"].converters["km"](new Big(1234)))
		assertEquals(123456, ci.conversionTable["m"].converters["cm"](new Big(1234.56)))
		assertEquals(1234567, ci.conversionTable["m"].converters["mm"](new Big(1234.567)))
		assertEquals(111222, ci.conversionTable["m"].converters["micro-m"](new Big(0.111222)))
		assertEquals(39.370, (ci.conversionTable["m"].converters["inch"](new Big(1))).round(3))
		assertEquals(3.2808, ci.conversionTable["m"].converters["ft"](new Big(1)).round(4))
		assertEquals(1.0936, ci.conversionTable["m"].converters["yd"](new Big(1)).round(4))
		assertEquals(0.00062137, ci.conversionTable["m"].converters["mile"](new Big(1)).round(8))
		
		print("")
		print("finish: Unit Test")
	}
	
	window.onload = function() {
		ut(t.category, t.ci)
	}
	
</script>
<script type="text/javascript" src="./ratio.js"></script>

</head>
<body>
    <form><textarea id="output" cols="100" rows="50"></textarea></form>
</body>
</html>